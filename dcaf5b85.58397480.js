(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{151:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(1),u=n(6),a=(n(0),n(164)),c={id:"useReducer",title:"useReducer",sidebar_label:"useReducer"},o={id:"useReducer",title:"useReducer",description:"## useReducer\u7c21\u4ecb\r",source:"@site/docs\\useReducer.md",permalink:"/ArhuaReactCourse/docs/useReducer",sidebar_label:"useReducer",sidebar:"someSidebar",previous:{title:"\u81ea\u5b9a\u7fa9Hook",permalink:"/ArhuaReactCourse/docs/selfDefineHook"},next:{title:"react-router - \u8def\u7531",permalink:"/ArhuaReactCourse/docs/reactRouter"}},s=[{value:"useReducer\u7c21\u4ecb",id:"usereducer\u7c21\u4ecb",children:[]},{value:"\u4f7f\u7528useReducer",id:"\u4f7f\u7528usereducer",children:[]},{value:"\u4f7f\u7528useReducer\u642d\u914duseContext\u5be6\u73fe\u8907\u96dc\u7684\u72c0\u614b\u7ba1\u7406",id:"\u4f7f\u7528usereducer\u642d\u914dusecontext\u5be6\u73fe\u8907\u96dc\u7684\u72c0\u614b\u7ba1\u7406",children:[]},{value:"useReducer \u7a0b\u5f0f\u78bc\u7247\u6bb5 (Snippets)\u9023\u7d50",id:"usereducer-\u7a0b\u5f0f\u78bc\u7247\u6bb5-snippets\u9023\u7d50",children:[]}],i={rightToc:s};function p(e){var t=e.components,n=Object(u.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},i,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"usereducer\u7c21\u4ecb"},"useReducer\u7c21\u4ecb"),Object(a.b)("p",null,"useReducer\u53ef\u4ee5\u4f5c\u70bauseState\u7684\u53e6\u4e00\u500b\u9078\u64c7\uff0c\n\u5b83\u8207useState\u76f8\u4f3c\uff0c\u4e00\u6a23\u80fd\u4fdd\u5b58\u72c0\u614b\uff0c\n\u4f46\u66f4\u9069\u5408\u8655\u7406\u8907\u96dc\u7684\u72c0\u614b\u908f\u8f2f\uff0c\n\u6216\u7528\u65bc\u8655\u7406\u4e0b\u4e00\u500b\u72c0\u614b\u4f9d\u8cf4\u65bc\u4e0a\u4e00\u500b\u72c0\u614b\u6642\u7684\u60c5\u6cc1\uff0c"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"// useReducer\n\nconst [state, dispatch] = useReducer(reducer, initialState, init);\n\n")),Object(a.b)("p",null,"useReducer\u6709\u5169\u500b\u8fd4\u56de\u503c\uff0c\u5206\u5225\u662f State \u72c0\u614b,\u8207\u7528\u4f86\u66f4\u65b0State\u7684dispatch\u51fd\u6578\uff0c\n\u66f4\u65b0State\u6642\u9700\u8981\u4f7f\u7528dispatch\u51fd\u6578\u63a5\u53d7\u4e00\u500b\u540d\u70baaction\u7684\u7269\u4ef6\uff0c\n\u4e26\u4e14\u4f7f\u7528dispatch\u51fd\u6578\u6642reducer\u51fd\u6578\u4e5f\u6703\u88ab\u8abf\u7528\u3002"),Object(a.b)("p",null,"\u800caction\u7269\u4ef6\u901a\u5e38\u6703\u6709\u4e00\u500btype\u5c6c\u6027\uff0c\u7528\u4f86\u63cf\u8ff0\u5982\u4f55\u66f4\u65b0State\uff0c\n\u53e6\u5916\u9084\u80fd\u8996\u60c5\u6cc1\u9700\u8981\u591a\u50b3\u5165\u4e00\u500bpayload\u5c6c\u6027\uff0c\u88e1\u9762\u53ef\u4ee5\u653e\u4e00\u4e9b\u8207\u66f4\u65b0State\u76f8\u95dc\u7684\u503c\uff0c"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),'//action\u7269\u4ef6\n\n{ type: "\u5982\u4f55\u66f4\u65b0State", payload:{ newstate: "\u8207\u66f4\u65b0State\u76f8\u95dc\u7684\u503c"} }\n\n')),Object(a.b)("p",null,"reducer\u51fd\u6578\u63a5\u53d7\u5169\u500b\u53c3\u6578\uff0c\u5206\u5225\u662fState\u8207action\uff0c\nState\u662f\u4e0a\u4e00\u500b\u72c0\u614b\uff0caction\u5247\u662f\u4f7f\u7528dispatch\u51fd\u6578\u63a5\u53d7\u7684action\u7269\u4ef6\uff0c\n\u5728reducer\u51fd\u6578\u88e1\uff0c\u5c31\u80fd\u900f\u904eaction\u7269\u4ef6\u7684type\u5c6c\u6027\uff0c\n\u505a\u76f8\u61c9\u8655\u7406\u5f8c\uff0c\u8b93\u5176 return \u7684\u8fd4\u56de\u503c\u6210\u70ba\u4e0b\u4e00\u500b\u72c0\u614b State\u3002"),Object(a.b)("p",null,Object(a.b)("img",Object(r.a)({parentName:"p"},{src:"/ArhuaReactCourse/img/useReducer.png",alt:"Snippets"}))),Object(a.b)("p",null,"\u800c\u5f9ereducer\u51fd\u6578\u80fd\u5920\u900f\u904eaction\u7269\u4ef6\u7684type\u5c6c\u6027\u5c0d\u72c0\u614b\u505a\u51fa\u4e0d\u540c\u8655\u7f6e\u9019\u9ede\u4f86\u770b\uff0c\n\u5c31\u80fd\u770b\u51fauseReducer\u6bd4\u8d77useState\u66f4\u9069\u5408\u8655\u7406\u8907\u96dc\u7684\u72c0\u614b\u908f\u8f2f\uff1b\n\u800creducer\u51fd\u6578\u7684\u7b2c\u4e00\u500b\u53c3\u6578\u662f\u4e0a\u4e00\u500b\u72c0\u614b\uff0c\n\u5247\u53ef\u4ee5\u8b93\u6211\u5011\u8655\u7406\u4e0b\u4e00\u500b\u72c0\u614b\u4f9d\u8cf4\u65bc\u4e0a\u4e00\u500b\u72c0\u614b\u6642\u7684\u60c5\u6cc1\u3002"),Object(a.b)("p",null,"\u90a3useReducer\u9084\u80fd\u63a5\u53d7\u53e6\u5916\u5169\u500b\u53c3\u6578\uff0c\n\u5c31\u662f\u505a\u70ba\u72c0\u614b\u521d\u59cb\u503c\u7684initialState\n\u8207init\u51fd\u6578\uff0cinit\u51fd\u6578\u6703\u5728useReducer\u521d\u6b21\u57f7\u884c\u6642\u8abf\u7528\uff0c\n\u5b83\u53ef\u4ee5\u63a5\u53d7initialState\u4f5c\u70ba\u53c3\u6578\u4f7f\u7528\uff0c\n\u4e26\u4e14\u5176\u8fd4\u56de\u503c\u6703\u8986\u84cbinitialState\u6210\u70ba\u72c0\u614b\u521d\u59cb\u503c\uff0c\u4f46\u662finit\u51fd\u6578\u4e00\u822c\u6bd4\u8f03\u5c11\u7528\u3002"),Object(a.b)("p",null,Object(a.b)("img",Object(r.a)({parentName:"p"},{src:"/ArhuaReactCourse/img/useReducer.png",alt:"Snippets"}))),Object(a.b)("h2",{id:"\u4f7f\u7528usereducer"},"\u4f7f\u7528useReducer"),Object(a.b)("p",null,"\u63a5\u4e0b\u4f86\u8b93\u6211\u5011\u770b\u770b\u5be6\u969b\u4f8b\u5b50\uff0c\u5982\u4e0b\u65b9\u7a0b\u5f0f\u78bc : "),Object(a.b)("p",null,"\u9996\u5148\u521d\u6b21\u57f7\u884cuseReducer\u6642\u6703\u8abf\u7528\u9019\u500binit\u51fd\u6578\uff0c\u5b83\u7684\u56de\u50b3\u503c\u6703\u8b8a\u6210\u72c0\u614b\u521d\u59cb\u503c\uff0c\n\u6240\u4ee5\u7d66\u5b83\u52a0\u4e0a100\u5f8c\u56de\u50b3\uff0c\u5247\u73fe\u5728\u72c0\u614b\u7684\u521d\u59cb\u503c\u5c31\u6703\u662f100\u3002"),Object(a.b)("p",null,'\u518d\u9ede\u64ca "+" \u9019\u9846\u6309\u7d10\uff0c\u5b83\u5c31\u6703\u53bb\u8abf\u7528dispatch\u51fd\u6578\u4e26\u50b3\u5165action\u7269\u4ef6\uff0c\n\u800c\u8abf\u7528dispatch\u51fd\u6578\u6642\u4e5f\u6703\u8abf\u7528reducer\u51fd\u6578\uff0c\u4e26\u4e14reducer\u51fd\u6578\u80fd\u4f7f\u7528\u4e0a\u4e00\u500b\u72c0\u614bstate\u5c31\u662f\u521d\u59cb\u503c100\uff0c\u8207\u50b3\u9032\u4f86\u7684action\u7269\u4ef6\uff0c\n\u53c8type\u662f "\u52a0" \uff0c\u6240\u4ee5\u5c31\u6703\u628a\u4e0a\u4e00\u500b\u72c0\u614b\u7684\u503c 100 \u52a0\u4e0a action.payload \u7684\u503c1\uff0c\n\u4e26\u8fd4\u56de\u8b8a\u6210\u4e0b\u4e00\u500b\u72c0\u614bstate\uff0c\u6240\u4ee5\u756b\u9762\u9019\u500bstate\u5c31\u6703\u8b8a\u6210\u662f101\uff0c\n\u4f9d\u6b64\u985e\u63a8\uff0c\u9ede\u64ca C \u6b78\u96f6\u5247\u6703\u56e0\u70ba\u8fd4\u56de0\u6240\u4ee5\u66f4\u65b0\u72c0\u614b\u70ba0\u3002'),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),'//Buttontwo.js\n\nimport React, { useReducer } from \'react\';//\u5f15\u5165useReducer\n\nconst init = (initState) => {\n    return initState + 100; // \u52a0\u4e0a100\u5f8c\u56de\u50b3\uff0c\u5247\u73fe\u5728\u72c0\u614b\u7684\u521d\u59cb\u503c\u5c31\u6703\u662f100\n}\n\nconst reducer = (state, action) => {\n    //\u5206\u5225\u6709\u52a0\u3001\u6e1b\u3001\u6b78\u96f6\u4e09\u500b\u60c5\u6cc1\u8207\u90fd\u4e0d\u662f\u7684\u60c5\u6cc1\n    switch (action.type) {\n        case "\u52a0":\n            return state + action.payload;\n        case "\u6e1b":\n            return state - action.payload;\n        case "\u6b78\u96f6":\n            return 0;\n        default:\n            return "\u8655\u7406\u5931\u6557";\n    }\n}\nconst Buttontwo = (props) => {\n\n    const [state, dispatch] = useReducer(reducer, 0, init);//\u521d\u6b21\u57f7\u884cuseReducer\u6642\u6703\u8abf\u7528\u9019\u500binit\u51fd\u6578\n\n    return (\n        <>\n            <p>Buttontwo\u7d44\u4ef6</p>\n            <p>{state}</p>\n            <button onClick={() => { dispatch({ type: "\u52a0", payload: 1 }) }}>+</button>\n            <button onClick={() => { dispatch({ type: "\u6e1b", payload: 1 }) }}>-</button>\n            <button onClick={() => { dispatch({ type: "\u6b78\u96f6" }) }}>C</button>\n        </>\n    )\n}\n\nexport default Buttontwo;\n')),Object(a.b)("h2",{id:"\u4f7f\u7528usereducer\u642d\u914dusecontext\u5be6\u73fe\u8907\u96dc\u7684\u72c0\u614b\u7ba1\u7406"},"\u4f7f\u7528useReducer\u642d\u914duseContext\u5be6\u73fe\u8907\u96dc\u7684\u72c0\u614b\u7ba1\u7406"),Object(a.b)("p",null,"\u6700\u5f8c\uff0c\u50cf\u6211\u5011\u4e4b\u524d\u8aaa\u8de8\u7d44\u4ef6\u9593\u50b3\u905e\u8cc7\u6599\u6642\u662f\u4ee5useState\u642d\u914duseContext\u4f86\u5be6\u73fe\uff0c\n\u7576\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528useReducer\u642d\u914duseContext\u4f86\u5be6\u73fe\u66f4\u8907\u96dc\u7684\u72c0\u614b\u7ba1\u7406\u3002"),Object(a.b)("p",null,"\u4f7f\u7528useReducer\u642d\u914duseContext\u65b9\u6cd5\u5f88\u7c21\u55ae\uff0c\n\u5176\u5be6\u5c31\u53ea\u662f\u628auseState\u63db\u6210useReducer\u800c\u5df2\u3002"),Object(a.b)("p",null,"\u6309Buttonthree\u7d44\u4ef6\u7684\u6309\u9215\uff0c\u4e00\u6a23\u80fd\u5920\u540c\u6b65\u66f4\u65b0Buttonthree\u7d44\u4ef6\u8207Buttontwo\u7d44\u4ef6\u7684\u503c\uff0c\n\u90a3\u9019\u6a23\u5c31\u5be6\u73fe\u4e86\u4f7f\u7528useReducer\u642d\u914duseContext\u4f86\u7ba1\u7406\u66f4\u8907\u96dc\u7684\u72c0\u614b\u3002"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"//App.js\n\nimport React, { useState, useReducer } from 'react';\nimport Buttonone from './Buttonone'\nimport Buttontwo from './Buttontwo';\nimport { Context } from './store'\n\nconst reducer = (state, action) => {\n\n  switch (action.type) {\n    case \"\u52a0\":\n      return state + action.payload;\n    case \"\u6e1b\":\n      return state - action.payload;\n    case \"\u6b78\u96f6\":\n      return 0;\n    default:\n      return \"\u8655\u7406\u5931\u6557\";\n  }\n}\n\nconst App = () => {\n  const [Count, setCount] = useReducer(reducer, 0);//useState\u63db\u6210useReducer\n\n  return (\n    <>\n      <p >\u9019\u662f\u6211\u7b2c\u4e00\u500b\u51fd\u6578\u7d44\u4ef6App</p>\n      <Context.Provider value={{ Count, setCount }}>\n        <Buttonone></Buttonone>\n        <Buttontwo></Buttontwo>\n      </Context.Provider>\n    </>\n  )\n}\n\nexport default App;\n")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"//Buttontwo.js\n\nimport React from 'react';\nimport { Context } from './store';\n\nconst Buttontwo = () => {\n    return (\n        <>\n            <Context.Consumer>\n                {value => <p>Buttontwo\u7d44\u4ef6 : {value.Count}</p>}\n            </Context.Consumer>\n        </>\n    )\n}\n\nexport default Buttontwo;\n\n")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"//Buttonthree.js\n\nimport React, { useContext } from 'react';\nimport { Context } from './store';\n\nconst Buttonthree = () => {\n    const { Count, setCount } = useContext(Context)\n    return (\n        <>\n            <p>Buttonthree\u7d44\u4ef6 : {Count}</p>\n            <button onClick={() => { setCount({ type: \"\u52a0\", payload: 1 }) }}>Buttonthree\u6309\u9215</button>\n        </>\n    )\n}\n\nexport default Buttonthree;\n")),Object(a.b)("h2",{id:"usereducer-\u7a0b\u5f0f\u78bc\u7247\u6bb5-snippets\u9023\u7d50"},Object(a.b)("a",Object(r.a)({parentName:"h2"},{href:"./HooksSnippets"}),"useReducer \u7a0b\u5f0f\u78bc\u7247\u6bb5 (Snippets)\u9023\u7d50")))}p.isMDXComponent=!0},164:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return m}));var r=n(0),u=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,u=function(e,t){if(null==e)return{};var n,r,u={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(u[n]=e[n]);return u}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}var i=u.a.createContext({}),p=function(e){var t=u.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},l=function(e){var t=p(e.components);return u.a.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return u.a.createElement(u.a.Fragment,{},t)}},b=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),l=p(n),b=r,m=l["".concat(c,".").concat(b)]||l[b]||d[b]||a;return n?u.a.createElement(m,o({ref:t},i,{components:n})):u.a.createElement(m,o({ref:t},i))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,c=new Array(a);c[0]=b;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,c[1]=o;for(var i=2;i<a;i++)c[i]=n[i];return u.a.createElement.apply(null,c)}return u.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);