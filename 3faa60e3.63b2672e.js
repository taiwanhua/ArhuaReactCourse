(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{110:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return u})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return r})),t.d(n,"default",(function(){return p}));var c=t(1),a=t(6),o=(t(0),t(156)),u={id:"useEffect",title:"useEffect",sidebar_label:"useEffect"},l={id:"useEffect",title:"useEffect",description:"## \u57fa\u672c\u4f7f\u7528\u65b9\u5f0f\r",source:"@site/docs\\useEffect.md",permalink:"/ArhuaReactCourse/docs/useEffect",sidebar_label:"useEffect",sidebar:"someSidebar",previous:{title:"\u7d44\u4ef6\u7684\u751f\u547d\u9031\u671f (Lifecycle)",permalink:"/ArhuaReactCourse/docs/Lifecycle"},next:{title:"\u5982\u4f55\u4f7f\u7528\u7a0b\u5f0f\u78bc\u7247\u6bb5 Snippets (For VSCode)",permalink:"/ArhuaReactCourse/docs/HowToUseSnippets"}},r=[{value:"\u57fa\u672c\u4f7f\u7528\u65b9\u5f0f",id:"\u57fa\u672c\u4f7f\u7528\u65b9\u5f0f",children:[{value:"\u4e0d\u50b3DependencyList\uff0c\u4e14\u8fd4\u56decleanup function",id:"\u4e0d\u50b3dependencylist\uff0c\u4e14\u8fd4\u56decleanup-function",children:[]},{value:"\u4e0d\u50b3DependencyList\uff0c\u4e5f\u4e0d\u8fd4\u56decleanup function\u7684\u60c5\u6cc1",id:"\u4e0d\u50b3dependencylist\uff0c\u4e5f\u4e0d\u8fd4\u56decleanup-function\u7684\u60c5\u6cc1",children:[]},{value:"DependencyList\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup function",id:"dependencylist\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup-function",children:[]},{value:"DependencyList\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup function",id:"dependencylist\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup-function",children:[]},{value:"DependencyList\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup function",id:"dependencylist\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup-function",children:[]},{value:"DependencyList\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup function",id:"dependencylist\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup-function",children:[]}]},{value:"useEffect\u5be6\u73fe\u985e\u4f3c\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f\u7684\u529f\u80fd",id:"useeffect\u5be6\u73fe\u985e\u4f3c\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f\u7684\u529f\u80fd",children:[{value:"\u5be6\u73fe\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f",id:"\u5be6\u73fe\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f",children:[]},{value:"\u642d\u914duseRef\u5be6\u73fe\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f",id:"\u642d\u914duseref\u5be6\u73fe\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f",children:[]}]},{value:"useEffect\u8655\u7406\u526f\u4f5c\u7528",id:"useeffect\u8655\u7406\u526f\u4f5c\u7528",children:[]},{value:"useEffect \u7a0b\u5f0f\u78bc\u7247\u6bb5 (Snippets)\u9023\u7d50",id:"useeffect-\u7a0b\u5f0f\u78bc\u7247\u6bb5-snippets\u9023\u7d50",children:[]}],s={rightToc:r};function p(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(c.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"\u57fa\u672c\u4f7f\u7528\u65b9\u5f0f"},"\u57fa\u672c\u4f7f\u7528\u65b9\u5f0f"),Object(o.b)("p",null,"useEffect\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u5f0f\u76f8\u7576\u7c21\u55ae\uff0c\u53ea\u9700\u8981\u5148\u50cfuseState\u4e00\u6a23\u5f9ereact\u4e00\u822c\u5f15\u5165\u9032\u4f86\u5c31\u53ef\u4ee5\u4e86\uff0c\n\u800cuseEffect\u63a5\u53d7\u5169\u500b\u53c3\u6578\uff0c\u7b2c\u4e00\u500b\u53c3\u6578\u662f\u4e00\u500b\u8981\u57f7\u884c\u7684\u51fd\u6578\uff0c\u6211\u5011\u53eb\u5b83EffectCallback\uff0c\u88e1\u9762\u53ef\u7528\u65bc\u8655\u7406\u526f\u4f5c\u7528\uff0c\n\u4e14\u53ef\u4ee5return\u4e00\u500b\u56de\u8abf\u51fd\u6578\uff0c\u8b93\u5b83\u5728\u4e0b\u4e00\u6b21\u57f7\u884cEffectCallback\u524d\u57f7\u884c\uff0c\u7528\u4f86\u505a\u6e05\u7406\u5de5\u4f5c\uff0c\n\u800c\u9019\u500b\u56de\u8abf\u51fd\u6578\u6211\u5011\u53eb\u5b83cleanup function\u3002"),Object(o.b)("p",null,"\u7b2c\u4e8c\u500b\u53c3\u6578\u662f\u9078\u64c7\u6027\u50b3\u5165\u7684\uff0c\u7528\u4f86\u63a7\u5236\u7b2c\u4e00\u500b\u51fd\u6578\u7684\u57f7\u884c\uff0c\u6211\u5011\u53eb\u5b83DependencyList\u3002\n\u4f60\u53ef\u4ee5\u4e0d\u50b3\u3001\u6216\u50b3\u5165\u7a7a\u9663\u5217\u3001\u6216\u5728\u9663\u5217\u5167\u50b3\u5165\u503c\uff0c\u901a\u5e38\u6703\u50b3\u5165state\uff0c\n\u63a5\u4e0b\u4f86\u6211\u5011\u4f86\u7d30\u7d30\u5256\u6790\u7b2c\u4e8c\u500b\u53c3\u6578DependencyList\u5f71\u97ffuseEffect\u57f7\u884c\u7684\u5e7e\u7a2e\u60c5\u6cc1\uff0c"),Object(o.b)("p",null,Object(o.b)("img",Object(c.a)({parentName:"p"},{src:"/ArhuaReactCourse/img/life5.png",alt:"Snippets"}))),Object(o.b)("h3",{id:"\u4e0d\u50b3dependencylist\uff0c\u4e14\u8fd4\u56decleanup-function"},"\u4e0d\u50b3DependencyList\uff0c\u4e14\u8fd4\u56decleanup function"),Object(o.b)("p",null,"\u4e0d\u50b3DependencyList\uff0c\u4e14\u8fd4\u56decleanup function\uff0c\n\u5247\u6703\u5728\u7d44\u4ef6\u639b\u8f09\u5b8c\u6642\u57f7\u884c\u4e00\u6b21EffectCallback\uff0c\n\u63a5\u8457\u5728\u6bcf\u6b21props\u6216state\u767c\u751f\u6539\u8b8a\u5c0e\u81f4\u7d44\u4ef6\u66f4\u65b0\u6642\uff0c\u5148\u57f7\u884ccleanup function\u518d\u57f7\u884cEffectCallback\n\u800c\u7d44\u4ef6\u5378\u8f09\u6642\uff0c\u5247\u53ea\u6703\u57f7\u884ccleanup function\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),'\nuseEffect(  \n  ()\xa0=>\xa0{\n\n\xa0\xa0    console.log("\u8655\u7406\u526f\u4f5c\u7528");\n\n      return\xa0()\xa0=>\xa0{\n\xa0\xa0\xa0\xa0     console.log("\u505a\u4e00\u4e9b\u6e05\u7406\u5de5\u4f5c");\n      }\n  })\n\n')),Object(o.b)("h3",{id:"\u4e0d\u50b3dependencylist\uff0c\u4e5f\u4e0d\u8fd4\u56decleanup-function\u7684\u60c5\u6cc1"},"\u4e0d\u50b3DependencyList\uff0c\u4e5f\u4e0d\u8fd4\u56decleanup function\u7684\u60c5\u6cc1"),Object(o.b)("p",null,"\u4e0d\u50b3DependencyList\uff0c\u4e5f\u4e0d\u8fd4\u56decleanup function\u7684\u60c5\u6cc1\u4e0b\uff0c\n\u5247\u5728\u7d44\u4ef6\u639b\u8f09\u5b8c\u6642\u4e5f\u57f7\u884c\u4e00\u6b21EffectCallback\uff0c\n\u63a5\u8457\u5728\u6bcf\u6b21props\u6216state\u767c\u751f\u6539\u8b8a\u5c0e\u81f4\u7d44\u4ef6\u66f4\u65b0\u6642\u90fd\u57f7\u884cEffectCallback\uff0c\n\u800c\u7d44\u4ef6\u5378\u8f09\u6642\uff0c\u56e0\u70ba\u6c92\u6709\u8fd4\u56decleanup function\u6240\u4ee5\u4e0d\u57f7\u884c\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),'\nuseEffect(  \n  ()\xa0=>\xa0{\n\n\xa0\xa0    console.log("\u8655\u7406\u526f\u4f5c\u7528");\n\n  })\n\n')),Object(o.b)("h3",{id:"dependencylist\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup-function"},"DependencyList\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup function"),Object(o.b)("p",null,"\u5176\u5be6\u6bcf\u6b21\u7d44\u4ef6\u66f4\u65b0\u6642React\u90fd\u6703\u6aa2\u67e5DependencyList\u5167\u7684\u503c\u6709\u6c92\u6709\u6539\u8b8a\uff0c\n\u518d\u6c7a\u5b9a\u8981\u4e0d\u8981\u91cd\u65b0\u57f7\u884cEffectCallback\uff0c\n\u800c\u5982\u679c\u50b3\u5165\u7a7a\u9663\u5217\u5c31\u8868\u793aDependencyList\u5167\u503c\u6c38\u9060\u4e0d\u6539\u8b8a\uff0c\u6240\u4ee5\u4e0d\u6703\u91cd\u65b0\u57f7\u884cEffectCallback"),Object(o.b)("p",null,"\u6240\u4ee5\u5728\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup function\u7684\u60c5\u6cc1\u4e0b\uff0c\n\u5c31\u6703\u5728\u7d44\u4ef6\u639b\u8f09\u5b8c\u6642\u57f7\u884c\u4e00\u6b21EffectCallback\uff0c\n\u63a5\u4e0b\u4f86\u7d44\u4ef6\u66f4\u65b0\u6642\u56e0\u70ba\u662f\u50b3\u5165\u7a7a\u9663\u5217\uff0c\u6240\u4ee5\u4e0d\u6703\u91cd\u65b0\u57f7\u884cEffectCallback\uff0c\n\u76f4\u5230\u7d44\u4ef6\u5378\u8f09\u6642\uff0c\u624d\u6703\u57f7\u884ccleanup function\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),'\nuseEffect(  \n  ()\xa0=>\xa0{\n\xa0\xa0    console.log("\u8655\u7406\u526f\u4f5c\u7528");\n\n      return\xa0()\xa0=>\xa0{\n\xa0\xa0\xa0\xa0     console.log("\u505a\u4e00\u4e9b\u6e05\u7406\u5de5\u4f5c");\n      }\n  }, [  ] )\n\n')),Object(o.b)("h3",{id:"dependencylist\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup-function"},"DependencyList\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup function"),Object(o.b)("p",null,"\u82e5DependencyList\u4ee5\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup function\uff0c\n\u5c31\u53ea\u6703\u5728\u7d44\u4ef6\u639b\u8f09\u5b8c\u6642\u57f7\u884c\u4e00\u6b21EffectCallback\u800c\u5df2\uff0c\n\u5728\u7d44\u4ef6\u66f4\u65b0\u6642\u4e0d\u6703\u91cd\u65b0\u57f7\u884cEffectCallback\uff0c\n\u7d44\u4ef6\u5378\u8f09\u6642\u4e5f\u4e0d\u6703\u57f7\u884ccleanup function\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),'\nuseEffect(  \n  ()\xa0=>\xa0{\n\xa0\xa0    console.log("\u8655\u7406\u526f\u4f5c\u7528");\n\n  }, [  ] )\n\n')),Object(o.b)("h3",{id:"dependencylist\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup-function"},"DependencyList\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u8fd4\u56decleanup function"),Object(o.b)("p",null,"DependencyList\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165 (\u901a\u5e38\u9019\u500b\u503c\u6703\u662fstate\u6216props\uff0c)\uff0c\u4e14\u8fd4\u56decleanup function\u7684\u60c5\u6cc1\u4e0b\uff0c\n\u5982\u679c\u662f\u50b3\u5165\u4e00\u500bstate\uff0c\u4e14\u8fd4\u56decleanup function\u7684\u60c5\u6cc1\uff0c\n\u5c07\u5728\u7d44\u4ef6\u639b\u8f09\u5b8c\u6642\u57f7\u884c\u4e00\u6b21EffectCallback\uff0c\n\u4e4b\u5f8c\u53ea\u6709\u9663\u5217\u88e1\u7684state\u767c\u751f\u6539\u8b8a\u624d\u6703\u5148\u57f7\u884ccleanup function\u5f8c\u518d\u57f7\u884cEffectCallback\uff0c\n\u800c\u7d44\u4ef6\u5378\u8f09\u6642\uff0c\u6703\u57f7\u884ccleanup function\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),'\nuseEffect(  \n  ()\xa0=>\xa0{\n\xa0\xa0    console.log("\u8655\u7406\u526f\u4f5c\u7528");\n\n      return\xa0()\xa0=>\xa0{\n\xa0\xa0\xa0\xa0     console.log("\u505a\u4e00\u4e9b\u6e05\u7406\u5de5\u4f5c");\n      }\n  }, [ state ] )\n\n')),Object(o.b)("h3",{id:"dependencylist\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup-function"},"DependencyList\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup function"),Object(o.b)("p",null,"\u800c\u5728DependencyList\u4ee5\u975e\u7a7a\u9663\u5217\u50b3\u5165\u4e14\u4e0d\u8fd4\u56decleanup function\u7684\u60c5\u6cc1\u4e0b\uff0c\n\u5c07\u5728\u7d44\u4ef6\u639b\u8f09\u5b8c\u6642\u57f7\u884c\u4e00\u6b21EffectCallback\uff0c\n\u4e14\u53ea\u6709\u9663\u5217\u88e1\u7684state\u767c\u751f\u6539\u8b8a\u624d\u6703\u57f7\u884cEffectCallback\uff0c\n\u800c\u7d44\u4ef6\u5378\u8f09\u6642\uff0c\u4e0d\u6703\u57f7\u884ccleanup function\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),'\nuseEffect(  \n  ()\xa0=>\xa0{\n\xa0\xa0    console.log("\u8655\u7406\u526f\u4f5c\u7528");\n\n  }, [ state ] )\n\n')),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"DependencyList\u5167\u53ef\u4ee5\u653e\u591a\u500b\u503c\uff0c\u4e00\u4f46\u88e1\u9762\u4efb\u4e00\u500b\u503c\u767c\u751f\u8b8a\u5316\u5c31\u6703\u518d\u6b21\u57f7\u884cEffectCallback\u3002")),Object(o.b)("h2",{id:"useeffect\u5be6\u73fe\u985e\u4f3c\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f\u7684\u529f\u80fd"},"useEffect\u5be6\u73fe\u985e\u4f3c\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f\u7684\u529f\u80fd"),Object(o.b)("p",null,"\u6211\u5011\u770b\u5982\u4f55\u4f7f\u7528useEffect\u5be6\u73fe\u8207\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f\u985e\u4f3c\u7684\u529f\u80fd\uff0c\n\u5982componentDidMount\u3001componentDidUpdate\u3001componentWillUnmount\u9019\u4e9b\u65b9\u6cd5\uff0c\n\u6211\u5011\u8a72\u5982\u4f55\u5be6\u73fe\u5462?\u8b93\u6211\u5011\u7e7c\u7e8c\u770b\u4e0b\u53bb..."),Object(o.b)("h3",{id:"\u5be6\u73fe\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f"},"\u5be6\u73fe\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f"),Object(o.b)("p",null,"\u5982\u4e0b\u7a0b\u5f0f\u78bc\uff0c\u4e00\u958b\u59cb\u639b\u8f09\u6642\u6703\u57f7\u884c\u4e00\u6b21EffectCallback\u3001\u7136\u5f8c\u6bcf\u6b21\u7d44\u4ef6\u66f4\u65b0\u6642\u4e5f\u90fd\u6703\u518d\u57f7\u884c\u4e00\u6b21EffectCallback\uff0c\n\u90a3\u5c31\u76f8\u7576\u65bccomponentDidMount\u8207componentDidUpdate\u7684\u7d44\u5408\u4e86\uff0c\n\u4e26\u4e14\u65bc\u4e0b\u65b9\u7b2c\u4e8c\u500buseEffect\u88e1\uff0c\u8b93\u5b83\u53ea\u8fd4\u56decleanup function\uff0c\u4e26\u4e14DependencyList\u50b3\u5165\u7a7a\u9663\u5217\uff0c\n\u9019\u6a23\u7684\u8a71\u9019\u500buseEffect\u9664\u4e86\u5378\u8f09\u6642\u6703\u57f7\u884ccleanup function\u5916\uff0c\n\u5176\u4ed6\u6642\u5019\u90fd\u4e0d\u6703\u505a\u4e8b\uff0c\u90a3\u5c31\u76f8\u7576\u65bccomponentWillUnmount\u4e86\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),'\nimport React, { useEffect, useState } from \'react\';\n\nconst Buttontwo = (props) => {\n\n    const [State, setState] = useState({ show: true, count: 0 });\n\n    useEffect(() => {\n        console.log("Buttontwo\u7684EffectCallback")\n\n        // return () => {\n        //     console.log("Buttontwo\u7684cleanup function")\n        // }\n    })\n\n    useEffect(() => {\n        // console.log("Buttontwo\u7684EffectCallback")\n\n        return () => {\n            console.log("Buttontwo\u7684cleanup function")\n        }\n    }, [])\n\n    return (\n        <>\n            <p>Buttontwo\u7d44\u4ef6</p>\n            <button onClick={() => { setState({ ...State, count: State.count + 1 }) }}>\u89f8\u767cButtontwo\u91cd\u65b0\u6e32\u67d3\u6b21\u6578 : {State.count}</button>\n        </>\n    )\n}\n\nexport default Buttontwo;\n\n')),Object(o.b)("h3",{id:"\u642d\u914duseref\u5be6\u73fe\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f"},"\u642d\u914duseRef\u5be6\u73fe\u985e\u7d44\u4ef6\u751f\u547d\u9031\u671f"),Object(o.b)("p",null,"\u4f46\u662f\u53ef\u80fd\u6709\u4e9b\u4eba\u6703\u8aaa\uff0c\u4ed6\u60f3\u8981\u8b93\u7d44\u4ef6\u639b\u8f09\u6642\u8ddf\u66f4\u65b0\u6642\u505a\u4e0d\u540c\u7684\u4e8b\u60c5\uff0c\u90a3\u600e\u9ebc\u8fa6\u5462?\u901a\u5e38\u958b\u767c\u4e0a\u662f\u4e0d\u592a\u9700\u8981\u9019\u6a23\u505a\uff0c\n\u4f46\u662f\u5982\u679c\u9047\u5230\u4e86\uff0c\u4e00\u5b9a\u8981\u9019\u6a23\u505a\uff0c\u90a3\u9019\u908a\u63d0\u4f9b\u4e00\u500b\u65b9\u6cd5\uff0c\u5c31\u662f\u642d\u914d\u4f7f\u7528\u53e6\u4e00\u500bHook useRef\u3002"),Object(o.b)("p",null,"\u5982\u4e0b\u65b9\u7a0b\u5f0f\u78bc\uff0c\u4f7f\u7528useRef\u53eb\u505aref\uff0c\u800c\u5b83\u53ef\u4ee5\u7d66\u4e00\u500b\u521d\u59cb\u503c\uff0c\u9019\u500b\u521d\u59cb\u503c\u6703\u7d66\u5230ref\u7269\u4ef6\u4e0b\u7684current\u88e1\uff0c\n\u800c\u4e14\u5462\uff0c\u5982\u679c\u6211\u53bb\u6539\u8b8acurrent\u7684\u503c\u7684\u8a71\uff0c\u4e26\u4e0d\u6703\u5c0e\u81f4\u7d44\u4ef6\u91cd\u65b0\u66f4\u65b0\u3001\u6e32\u67d3\uff0c\n\u5229\u7528\u9019\u500b\u7279\u6027\uff0c\u8b93\u5b83\u5728\u639b\u8f09\u6642\u628aref\u7684current\u8a2d\u70batrue\uff0c\u4e26\u4e14\u8b93\u5b83\u8f38\u51faButtontwo\u7684EffectCallback\uff0c\u9019\u5c31\u76f8\u7576\u65bccomponentDidMount\uff1b"),Object(o.b)("p",null,"\u7136\u5f8c\u7d44\u4ef6\u6bcf\u6b21\u8981\u66f4\u65b0\u6642\uff0c\u53ea\u6709\u7576current\u70ba\u771f\uff0c\u624d\u57f7\u884cEffectCallback\uff0c\n\u90a3\u56e0\u70ba\u7b2c\u4e00\u6b21\u639b\u8f09\u6642\u5019\u70bafalse\uff0c\u4e0d\u6703\u57f7\u884cEffectCallback\uff0c\n\u800c\u4e4b\u5f8c\u56e0\u70ba\u5728\u7b2c\u4e8c\u500buseEffect\u88e1current\u88ab\u6539\u70batrue\uff0c\u6240\u4ee5\u4e4b\u5f8c\u6bcf\u6b21\u7d44\u4ef6\u66f4\u65b0\u90fd\u6703\u57f7\u884cEffectCallback\uff0c\n\u90a3\u5c31\u76f8\u7576\u65bccomponentDidUpdate\u4e86\uff1b"),Object(o.b)("p",null,"\u800c\u6700\u5f8c\u5378\u8f09\u6642\uff0c\u5c31\u4e00\u6a23\u4f7f\u7528Buttontwo\u7684cleanup function\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),'\nimport React, { useEffect, useState, useRef } from \'react\';\n\nconst Buttontwo = (props) => {\n\n    const [State, setState] = useState({ show: true, count: 0 });\n    const ref = useRef(false);\n\n    useEffect(() => {\n        if (ref.current) {\n            console.log("update")\n        }\n        // return () => {\n        //     console.log("Buttontwo\u7684cleanup function")\n        // }\n    })\n\n    useEffect(() => {\n        ref.current = true;\n        console.log("Buttontwo\u7684EffectCallback")\n\n        return () => {\n            console.log("Buttontwo\u7684cleanup function")\n        }\n    }, [])\n\n    return (\n        <>\n            <p>Buttontwo\u7d44\u4ef6</p>\n            <button onClick={() => { setState({ ...State, count: State.count + 1 }) }}>\u89f8\u767cButtontwo\u91cd\u65b0\u6e32\u67d3\u6b21\u6578 : {State.count}</button>\n        </>\n    )\n}\n\nexport default Buttontwo;\n\n')),Object(o.b)("h2",{id:"useeffect\u8655\u7406\u526f\u4f5c\u7528"},"useEffect\u8655\u7406\u526f\u4f5c\u7528"),Object(o.b)("p",null,"\u6211\u5011\u63a5\u4e0b\u4f86\u5c55\u793a\u4f7f\u7528useEffect\u53bb\u8655\u7406\u526f\u4f5c\u7528Fetch\u8acb\u6c42\uff0c\n\u4e0b\u9762\u6211\u6709\u6e96\u5099\u597d\u4e00\u500burl\uff0c\u5b83\u6703\u8fd4\u56de\u4e00\u500bjson\u7269\u4ef6\uff0c\u88e1\u9762\u6709id 1\u52303\u7684\u4e09\u7d44\u8cc7\u6599\uff0c\n\u5982\u679c\u7db2\u5740\u5f8c\u9762\u63a51\u5c31\u50b3\u56deid\u662f1\u7684\u8cc7\u6599\u3001\n\u5982\u679c\u662f2\u5c31\u50b3\u56deid\u662f2\u7684\u8cc7\u6599\uff0c\n\u4f9d\u6b64\u985e\u63a8\u3002"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("a",Object(c.a)({parentName:"p"},{href:"https://my-json-server.typicode.com/taiwanhua/demo/posts/"}),"https://my-json-server.typicode.com/taiwanhua/demo/posts/"),"  ",Object(o.b)("br",null),"\n",Object(o.b)("a",Object(c.a)({parentName:"p"},{href:"https://my-json-server.typicode.com/taiwanhua/demo/posts/1"}),"https://my-json-server.typicode.com/taiwanhua/demo/posts/1")," ",Object(o.b)("br",null),"\n",Object(o.b)("a",Object(c.a)({parentName:"p"},{href:"https://my-json-server.typicode.com/taiwanhua/demo/posts/2"}),"https://my-json-server.typicode.com/taiwanhua/demo/posts/2")," ",Object(o.b)("br",null),"\n",Object(o.b)("a",Object(c.a)({parentName:"p"},{href:"https://my-json-server.typicode.com/taiwanhua/demo/posts/3"}),"https://my-json-server.typicode.com/taiwanhua/demo/posts/3")," ",Object(o.b)("br",null))),Object(o.b)("p",null,'\u9084\u8a18\u5f97\u6211\u5011\u4e4b\u524d\u5728\u8b1bES6\u6642\u8aaa\u904e\uff0casync await\u642d\u914dfetch\u53bb\u8acb\u6c42\u8cc7\u6599\uff0c\n\u90a3\u76f4\u63a5\u5728useEffect\u88e1\u9762\u5beb\u4e00\u500basync\u51fd\u6578\u540d\u5b57\u5c31\u53ebMyFetch\uff0c\n\u5f8c\u9762\u9019\u500bfetch\u8acb\u6c42\u7b2c\u4e00\u500b\u53c3\u6578 "Url',"_",'" \uff0c\u5c31\u662f\u8981\u8acb\u6c42\u7684\u7db2\u5740\uff0c\n\u7b2c\u4e8c\u500b\u53c3\u6578  "Param',"_",'"\uff0c\u56e0\u70ba\u6211\u5011\u767c\u7684\u662fGET\u8acb\u6c42\uff0c\u6240\u4ee5\u53ef\u4ee5\u4e0d\u7528\u50b3\uff0c\n\u90a3\u5176\u5be6\u9019\u500bMyfetch\u5c31\u662f\u767c\u9001Fetch\u8acb\u6c42\uff0c\u7136\u5f8c\u8f49\u6210json\u683c\u5f0f\u4f5c\u70ba\u56de\u50b3\u503c\uff0c\n\u6700\u5f8c\u6211\u5011\u5c31\u8abf\u7528MyFetch\uff0c\u50b3\u5165Url\uff0c\u518d\u628a\u5b83\u8f38\u51fa\u5230Console\u3002\n\u9019\u6a23\u4e00\u4f86\u6211\u5011\u8acb\u6c42\u7684\u6578\u64da\u5c31\u88ab\u6211\u5011\u8f38\u51fa\u51fa\u4f86\u4e86\uff0c'),Object(o.b)("p",null,"\u6211\u5011\u5230\u73fe\u5728\u7e3d\u5171\u770b\u4e86useState\u3001useContext\u3001useEffect\u3001useRef\u9019\u5e7e\u500bReact Hook\uff0c\n\u9019\u4e9b\u5728\u958b\u767c\u4e2d\u90fd\u662f\u5f88\u5be6\u7528\u7684Hook\uff0c\u5927\u5bb6\u4e00\u5b9a\u8981\u6703\u54e6\uff0c\n\u4e0b\u4e00\u7bc0\u8ab2\u6211\u6703\u518d\u4ecb\u5176\u5b83Hook\u8207\u5982\u4f55\u88fd\u4f5c\u81ea\u5df1\u7684Hook\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object(c.a)({parentName:"pre"},{className:"language-javascript"}),"import React, { useEffect, useState, useRef } from 'react';\n\nconst Buttontwo = (props) => {\n\n    const [State, setState] = useState({ show: true, count: 0 });\n\n    useEffect(() => {\n        const MyFetch = async (Url_, Parma_ = {}) => {\n            try {\n                const Response = await fetch(Url_, Parma_)//\u767c\u9001Fetch\u8acb\u6c42\n                    .then(Result => {\n                        const ResultJson = Result.clone().json();//\u8f49\u6210json\u683c\u5f0f\n\n                        return ResultJson;\n                    })\n                    .then((PreResult) => {\n\n                        return PreResult;\n                    })\n                    .catch((Error) => {\n\n                    })\n                    .finally(() => {\n\n                    });\n\n                return Response;//\u4f5c\u70ba\u56de\u50b3\u503c\n            } catch (Error) {\n\n            }\n        }\n\n        console.log(MyFetch(`https://my-json-server.typicode.com/taiwanhua/demo/posts/${State.count}`));\n        //\u8abf\u7528MyFetch\uff0c\u50b3\u5165Url\uff0c\u518d\u628a\u5b83\u8f38\u51fa\u5230Console\u3002\n\n    }, [State])//\u7576\u9ede\u64ca\u6309\u9215\u5019\uff0cState.count\u6703\u52a01\uff0c\u76f8\u7576\u65bc\u8acb\u6c42\u4e0b\u4e00\u500bid\u7684\u8cc7\u6599\n\n    return (\n        <>\n            <p>Buttontwo\u7d44\u4ef6</p>\n            <button onClick={() => { setState({ ...State, count: State.count + 1 }) }}>\u89f8\u767cButtontwo\u91cd\u65b0\u6e32\u67d3\u6b21\u6578 : {State.count}</button>\n        </>\n    )\n}\n\nexport default Buttontwo;\n")),Object(o.b)("h2",{id:"useeffect-\u7a0b\u5f0f\u78bc\u7247\u6bb5-snippets\u9023\u7d50"},Object(o.b)("a",Object(c.a)({parentName:"h2"},{href:"./HooksSnippets"}),"useEffect \u7a0b\u5f0f\u78bc\u7247\u6bb5 (Snippets)\u9023\u7d50")))}p.isMDXComponent=!0},156:function(e,n,t){"use strict";t.d(n,"a",(function(){return f})),t.d(n,"b",(function(){return d}));var c=t(0),a=t.n(c);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);n&&(c=c.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,c)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,c,a=function(e,n){if(null==e)return{};var t,c,a={},o=Object.keys(e);for(c=0;c<o.length;c++)t=o[c],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(c=0;c<o.length;c++)t=o[c],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=a.a.createContext({}),p=function(e){var n=a.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l({},n,{},e)),t},f=function(e){var n=p(e.components);return a.a.createElement(s.Provider,{value:n},e.children)},i={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},b=Object(c.forwardRef)((function(e,n){var t=e.components,c=e.mdxType,o=e.originalType,u=e.parentName,s=r(e,["components","mdxType","originalType","parentName"]),f=p(t),b=c,d=f["".concat(u,".").concat(b)]||f[b]||i[b]||o;return t?a.a.createElement(d,l({ref:n},s,{components:t})):a.a.createElement(d,l({ref:n},s))}));function d(e,n){var t=arguments,c=n&&n.mdxType;if("string"==typeof e||c){var o=t.length,u=new Array(o);u[0]=b;var l={};for(var r in n)hasOwnProperty.call(n,r)&&(l[r]=n[r]);l.originalType=e,l.mdxType="string"==typeof e?e:c,u[1]=l;for(var s=2;s<o;s++)u[s]=t[s];return a.a.createElement.apply(null,u)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);